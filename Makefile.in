prefix  = @ac_prefix@
qmake   = @ac_qmake@

name    = qmidinet

target  = src/$(name)

headers = src/config.h \
	src/qmidinet.h \
	src/qmidinetAbout.h \
	src/qmidinetUdpDevice.h \
	src/qmidinetAlsaMidiDevice.h \
	src/qmidinetJackMidiDevice.h \
	src/qmidinetOptions.h \
	src/qmidinetOptionsForm.h

sources = \
	src/qmidinet.cpp \
	src/qmidinetUdpDevice.cpp \
	src/qmidinetAlsaMidiDevice.cpp \
	src/qmidinetJackMidiDevice.cpp \
	src/qmidinetOptions.cpp \
	src/qmidinetOptionsForm.cpp

forms = \
	src/qmidinetOptionsForm.ui

resources = \
	src/qmidinet.qrc


exec_prefix = @exec_prefix@
datarootdir = @datarootdir@

export bindir = @bindir@
export datadir = @datadir@


all:	$(target)


$(target):	$(name).mak $(resources) ${forms} $(sources) $(headers)
	@make -f $(name).mak

$(name).mak:	$(name).pro
	@$(qmake) -o $(name).mak $(name).pro


install:	$(target)
	@make INSTALL_ROOT=$(DESTDIR) -f $(name).mak install

uninstall:	$(DESTDIR)$(bindir)/$(name)
	@make INSTALL_ROOT=$(DESTDIR) -f $(name).mak uninstall


clean:	$(name).mak
	@make -f $(name).mak clean
	@rm -f $(target) $(target).mak $(name).mak
	@rm -rf *.cache *.log *.status
